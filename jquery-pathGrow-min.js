(function($){'use strict';$.pathGrow=function(element,opts){var defaults={speed:4,startColor:'#fff',strokeLinecap:'round',fill:'#ddd',stroke:'#000',strokeWidth:5,reverse:false,target:null,easing:null,onComplete:null,onReset:null};var plugin=this,svgDoc=element,options=$.extend({},defaults,opts),allPaths=svgDoc.getElementsByTagName('path'),pathsArr=[],anims=[],pathCount=0,onComplete=options.onComplete,targetId=options.target,speed=options.speed,fill=options.fill,stroke=options.stroke,strokeLinecap=options.strokeLinecap,strokeWidth=options.strokeWidth,easing=options.easing,reverse=options.reverse,onReset=options.onReset;plugin.init=function(){if(targetId!==null){var group=svgDoc.getElementById(targetId);allPaths=group.getElementsByTagName('path');}loopPaths();};var
loopPaths=function(reset){for(var i=allPaths.length-1;i>=0;i--){var path=allPaths[i];if(reset){removePathAttrs(path);}else{var pathLength=Math.round(path.getTotalLength());setPathAttrs(path,pathLength);pathsArr.push({d:allPaths[i],length:pathLength});}}if(reverse){pathsArr.reverse();}},removePathAttrs=function(path){if(typeof fill!=='boolean'&&fill!==false){path.removeAttribute('fill');}path.removeAttribute('stroke');path.removeAttribute('stroke-linecap');path.removeAttribute('stroke-width');path.removeAttribute('stroke-dasharray');},setPathAttrs=function(path,pathLength){if(typeof fill!=='boolean'&&fill!==false){path.setAttribute('fill',fill);}path.setAttribute('stroke',stroke);path.setAttribute('stroke-linecap',strokeLinecap);path.setAttribute('stroke-width',strokeWidth);path.setAttribute('stroke-dasharray','0 '+pathLength);},animatePath=function(splitNr){var index=splitNr||0,path=pathsArr[index];if(path&&path.length!=='undefined'){var anims=[];anims.push(Tween.to({x:0},{x:path.length},speed,function(vars){path.d.setAttribute('stroke-dasharray',(~~(vars.x)+1)+' '+path.length);if(vars.x===path.length){if(pathCount!==pathsArr.length){pathCount++;if(pathCount!==allPaths.length){animatePath(pathCount);}else
{if(typeof onComplete==='function'){onComplete();}}}}},easing));}},reset=function(){pathsArr=[];anims=[];pathCount=0;loopPaths(true);if(typeof onReset==='function'){onReset();}};plugin.start=function(){animatePath();};plugin.reset=function(){reset();loopPaths();};plugin.init();};$.fn.pathGrow=function(options){return this.each(function(){if(undefined===$(this).data('pathGrow')){var plugin=new $.pathGrow(this,options);$(this).data('pathGrow',plugin);}});};})(jQuery);