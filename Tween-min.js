var Tween=Tween||{};Tween.win=window;Tween.fps=30;Tween.tweens=[];Tween.count=0;Tween.time=0;Tween.now=(Tween.win.performance&&Tween.win.performance.now)?function(){return Tween.win.performance.now();}:Date.now||function(){return new Date().getTime();};Tween.DEFAULT_EASE=function(t,b,c,d){return c*t/d+b;};Tween.initialize=function(){Tween.time=Tween.now()*0.001;var request=Tween.win.requestAnimationFrame||Tween.win.webkitRequestAnimationFrame||Tween.win.mozRequestAnimationFrame;if(request!==undefined){var render=function(){request(render);Tween.updateAll();};render();return;}Tween.win.setInterval(Tween.updateAll,1000/Tween.fps);};Tween.to=function(start,end,duration,callback,ease){var tween=new Tween.Core(start,end,duration,callback,ease||Tween.DEFAULT_EASE);Tween.tweens[Tween.count++]=tween;return tween;};Tween.updateAll=function(){Tween.time=Tween.now()*0.001;for(var i=0;i<Tween.count;i++){var tween=Tween.tweens[i];if(tween.complete){tween.destruct();Tween.tweens.splice(i--,1);Tween.count--;continue;}tween.step(Tween.time);}};Tween.killAll=function(){for(var i=0;i<Tween.count;i++){var tween=Tween.tweens[i];tween.destruct();}Tween.tweens=[];Tween.count=0;};Tween.Core=function(valuesStart,valuesEnd,duration,callback,ease){this.valuesStart=valuesStart;this.valuesEnd=valuesEnd;this.values={};this.duration=duration;this.callback=callback;this.ease=ease;this.properties=[];this.count=0;this.ratio=0;this.timeStart=Tween.time;this.time=0;this.complete=false;for(var property in this.valuesStart){this.values[property]=this.valuesStart[property];var prop=new Tween.Property(this.values,this.valuesStart,this.valuesEnd,property);this.properties[this.count++]=prop;};};Tween.Core.prototype.step=function(time){if(this.complete){return;}this.time=(time-this.timeStart);if(this.time>=this.duration){this.ratio=1;this.complete=true;this.setProperties();return;}this.ratio=this.ease(this.time,0,1,this.duration);this.setProperties();};Tween.Core.prototype.setProperties=function(){for(var i=0;i<this.count;i++){var prop=this.properties[i];prop.setRatio(this.ratio);}if(this.callback!==null){this.callback(this.values);}};Tween.Core.prototype.destruct=function(){for(var i=0;i<this.count;i++){var prop=this.properties[i];prop.destruct();}this.valuesStart=null;this.valuesEnd=null;this.duration=null;this.callback=null;this.ease=null;this.properties=null
this.count=0;this.ratio=0;this.timeStart=0;this.time=0;this.complete=true;};Tween.Property=function(values,valuesStart,valuesEnd,property){this.values=values;this.property=property;this.valueStart=parseFloat(valuesStart[property]);this.valueEnd=parseFloat(valuesEnd[property]);this.change=this.valueEnd-this.valueStart;};Tween.Property.prototype.setRatio=function(ratio){var value=this.valueStart+(ratio*this.change);this.values[this.property]=value;};Tween.Property.prototype.destruct=function(){this.property=null;this.valueStart=0;this.valueEnd=0;this.change=0;};Tween.initialize();window.Tween=Tween;